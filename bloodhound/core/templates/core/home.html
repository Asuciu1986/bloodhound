{% extends 'base.html' %}

{% load humanize %}

{% block content %}
  <div class="panel panel-danger">
    <div class="panel-heading">
      <h3 class="panel-title">Verkkokauppa.com</h3>
    </div>
    <div class="panel-body">
      <div class="btn-group pull-right" role="group" aria-label="Pager">
        {% if page_obj.has_previous %}
          <a href="?page={{ page_obj.previous_page_number }}{% if order %}&o={{ order }}{% endif %}{% if querystring %}&q={{ querystring }}{% endif %}" class="btn btn-default btn-sm">
            <span class="glyphicon glyphicon-arrow-left"></span>
          </a>
        {% else %}
          <button type="button" class="btn btn-default btn-sm" disabled>
            <span class="glyphicon glyphicon-arrow-left"></span>
          </button>
        {% endif %}
        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}{% if order %}&o={{ order }}{% endif %}{% if querystring %}&q={{ querystring }}{% endif %}" class="btn btn-default btn-sm">
            <span class="glyphicon glyphicon-arrow-right"></span>
          </a>
        {% else %}
          <button type="button" class="btn btn-default btn-sm" disabled>
            <span class="glyphicon glyphicon-arrow-right"></span>
          </button>
        {% endif %}
      </div>

      <div class="btn-group pull-right">
        <a href="javascript:void(0);" class="btn btn-sm btn-link js-jump-page" data-container="body" data-placement="bottom">
          <strong>{{ page_obj.start_index }}</strong> â€“ <strong>{{ page_obj.end_index }}</strong> of <strong>{{ page_obj.paginator.count }}</strong>
        </a>
      </div>

    </div>
    <table class="table" id="products" data-num-pages="{{ page_obj.paginator.num_pages }}">
      <thead>
        <tr>
          <th>Name</th>
          <th class="text-center"><span class="fa fa-line-chart"></span></th>
          <th class="text-center"><span class="glyphicon glyphicon-time"></span></th>
          <th class="text-center"><span class="glyphicon glyphicon-euro"></span></th>
        </tr>
      </thead>
      <tbody>
        {% for product in object_list %}
          <tr>
            <td><a href="{{ product.url }}" target="_blank">{{ product.name }} <small><span class="glyphicon glyphicon-new-window"></span></small></a></td>
            <td class="text-right">{{ product.price_changes }}</td>
            <td class="text-right" style="white-space: nowrap;">{{ product.visited_at|naturaltime }}</td>
            <td class="text-right" style="white-space: nowrap;">{{ product.get_current_price_display }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>  
{% endblock %}
